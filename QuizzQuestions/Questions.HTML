<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Question</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="quiz-container">
        <h2 id="question-number"></h2>
        <p id="question-text"></p>
        <div id="answers" class="answer-buttons"></div>
        <div class="button-container">
            <button id="next-btn" class="next-button">Next</button>
            <button id="submit-btn" class="submit-button">N·ªôp b√†i</button>
        </div>
    </div>
    <!-- H·ªôp x√°c nh·∫≠n n·ªôp b√†i -->
    <div id="confirmation-box" class="confirmation-box">
        <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn n·ªôp b√†i hay kh√¥ng?</p>
        <button id="yes-btn" class="confirmation-btn">C√≥</button>
        <button id="no-btn" class="confirmation-btn">Kh√¥ng</button>
    </div>

    <div id="success-message" class="success-message">
        <span>üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh b√†i thi!</span>
        <div id="score-display" class="score-display"></div>
        <button id="retry-btn" class="retry-button">L√†m l·∫°i b√†i test</button>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let questions = [];
        let selectedAnswer = null;
        let score = 0;

        function fetchQuestions() {
            axios.get('https://jsonplaceholder.typicode.com/posts?_limit=10')
                .then(response => {
                    questions = response.data.map((item, index) => {
                        let correctIndex = Math.floor(Math.random() * 4);
                        let answers = [
                            { text: "Option A", correct: false },
                            { text: "Option B", correct: false },
                            { text: "Option C", correct: false },
                            { text: "Option D", correct: false }
                        ];
                        answers[correctIndex].correct = true;

                        return {
                            id: index + 1,
                            question: `Question ${index + 1}: ${item.title}`,
                            answers: answers
                        };
                    });
                    displayQuestion();
                })
                .catch(error => console.error('Error fetching questions:', error));
        }

        function displayQuestion() {
            if (currentQuestionIndex >= questions.length) {
                // ·∫®n c√°c ph·∫ßn t·ª≠ khi quiz ho√†n th√†nh
                document.getElementById("question-number").style.display = "none";
                document.getElementById("question-text").style.display = "none";
                document.getElementById("answers").style.display = "none";
                document.getElementById("next-btn").style.display = "none";
                return;
            }

            let question = questions[currentQuestionIndex];
            document.getElementById("question-number").innerText = `Question ${question.id}/10`;
            document.getElementById("question-text").innerText = question.question;

            let answersContainer = document.getElementById("answers");
            answersContainer.innerHTML = "";

            question.answers.forEach((answer, index) => {
                let btn = document.createElement("button");
                btn.className = "answer-button";
                btn.innerText = `${String.fromCharCode(65 + index)}. ${answer.text}`;
                btn.onclick = () => selectAnswer(btn, answer.correct);
                answersContainer.appendChild(btn);
            });
        }

        function selectAnswer(button, isCorrect) {
            selectedAnswer = isCorrect;
            if (isCorrect) {
                score++;
            }
            document.querySelectorAll(".answer-button").forEach(btn => {
                btn.classList.remove("selected");
            });
            button.classList.add("selected");
        }

        document.getElementById("next-btn").addEventListener("click", () => {
            currentQuestionIndex++;
            selectedAnswer = null;
            displayQuestion();
        });

        // N√∫t n·ªôp b√†i
        document.getElementById("submit-btn").addEventListener("click", () => {
            document.getElementById("confirmation-box").style.display = "block";
        });

        // N√∫t "C√≥" trong h·ªôp x√°c nh·∫≠n
        document.getElementById("yes-btn").addEventListener("click", () => {
            document.getElementById("confirmation-box").style.display = "none";
            const scorePercentage = (score / questions.length) * 100;
            document.getElementById("score-display").innerHTML = 
                `<p>ƒêi·ªÉm c·ªßa b·∫°n: ${score}/${questions.length} (${scorePercentage}%)</p>`;
            document.getElementById("success-message").style.display = "block";
        });

        // N√∫t "Kh√¥ng" trong h·ªôp x√°c nh·∫≠n
        document.getElementById("no-btn").addEventListener("click", () => {
            document.getElementById("confirmation-box").style.display = "none";
        });

        // Th√™m x·ª≠ l√Ω cho n√∫t l√†m l·∫°i
        document.getElementById("retry-btn").addEventListener("click", () => {
            // Reset c√°c gi√° tr·ªã
            currentQuestionIndex = 0;
            score = 0;
            selectedAnswer = null;
            
            // Hi·ªÉn th·ªã l·∫°i c√°c ph·∫ßn t·ª≠
            document.getElementById("question-number").style.display = "block";
            document.getElementById("question-text").style.display = "block";
            document.getElementById("answers").style.display = "block";
            document.getElementById("next-btn").style.display = "block";
            
            // ·∫®n th√¥ng b√°o th√†nh c√¥ng
            document.getElementById("success-message").style.display = "none";
            
            // T·∫£i l·∫°i c√¢u h·ªèi
            fetchQuestions();
        });

        fetchQuestions();
    </script>
</body>
</html>
